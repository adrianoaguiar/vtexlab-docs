{
    "product": "logistics",
    "version": "latest",
    "resource": "reservation",
    "documentation": "api",
    "methods": [
        {
            "title": "Salva uma reserva",
            "description": "Cria uma reserva",
            "verb": "POST",
            "route": {
                "template": "/api/logistics/pvt/inventory/reservations"
            },
            "arguments": {
                "salesChannel": {
                    "type": "string",
                    "description": "Canal de vendas",
                    "required": false
                },
                "lockId": {
                    "type": "string",
                    "description": "Identificador da reserva. Se não informado, a aplicação cria um",
                    "required": false
                },
                "autorizationExpirationTTL": {
                    "type": "TimeSpan",
                    "description": "Prazo para manter a reserva ativa enquanto ela não é confirmada",
                    "required": false
                },
                "deliveryItemOptions": {
                    "type": "string",
                    "description": "Identificador da reserva. Se não informado, a aplicação cria um",
                    "required": false,
                    "arguments": {
                        "item": {
                            "type": "string",
                            "description": "Item a ser reservado",
                            "required": false,
                            "arguments": {
                                "id": {
                                    "type": "string",
                                    "description": "Identificador único do item",
                                    "required": true
                                },
                                "groupItemId": {
                                    "type": "string",
                                    "description": "Identificador de agrupamento do item. Itens com o mesmo groupItemId devem ser entregues juntos",
                                    "required": false
                                },
                                "quantity": {
                                    "type": "int",
                                    "description": "Quantidade total do item",
                                    "required": true
                                },
                                "price": {
                                    "type": "decimal",
                                    "description": "Preço do item",
                                    "required": true
                                },
                                "modal": {
                                    "type": "string",
                                    "description": "Categorização de entrega em que se enquadra o item. Pode ser Líquido, Químico ou Refrigerado,",
                                    "required": false
                                },
                                "additionalHandlingTime": {
                                    "type": "TimeSpan",
                                    "description": "Tempo para manipulação do item. É acrescido ao tempo final da entrega",
                                    "required": false
                                },
                                "dimension": {
                                    "type": "object",
                                    "description": "Dimensões do item",
                                    "required": true,
                                    "arguments": {
                                        "weight": {
                                            "type": "decimal",
                                            "description": "peso",
                                            "required": false
                                        },
                                        "height": {
                                            "type": "decimal",
                                            "description": "altura",
                                            "required": false
                                        },
                                        "width": {
                                            "type": "decimal",
                                            "description": "largura",
                                            "required": false
                                        },
                                        "length": {
                                            "type": "decimal",
                                            "description": "comprimento",
                                            "required": false
                                        },
                                        "maxSumDimension": {
                                            "type": "decimal",
                                            "description": "",
                                            "required": false
                                        }
                                    }
                                },
                                "kitItem": {
                                    "type": "array",
                                    "description": "Coleção de outros itens que compõem este item. Ocorre nos casos em que o item é um kit",
                                    "required": false,
                                    "arguments": {
                                        "id": {
                                            "type": "string",
                                            "description": "Identificador único do item",
                                            "required": true
                                        },
                                        "groupItemId": {
                                            "type": "string",
                                            "description": "Identificador de agrupamento do item. Itens com o mesmo groupItemId devem ser entregues juntos",
                                            "required": false
                                        },
                                        "quantity": {
                                            "type": "int",
                                            "description": "Quantidade total do item",
                                            "required": true
                                        },
                                        "price": {
                                            "type": "decimal",
                                            "description": "Preço do item",
                                            "required": true
                                        },
                                        "modal": {
                                            "type": "decimal",
                                            "description": "Categorização de entrega em que se enquadra o item. Pode ser líquido, químico ou refrigerado",
                                            "required": false
                                        },
                                        "additionalHandlingTime": {
                                            "type": "decimal",
                                            "description": "Tempo para manipulação do item. É acrescido ao tempo final da entrega",
                                            "required": false
                                        },
                                        "dimension": {
                                            "type": "object",
                                            "description": "Dimensões do item",
                                            "required": true,
                                            "arguments": {
                                                "weight": {
                                                    "type": "decimal",
                                                    "description": "peso",
                                                    "required": false
                                                },
                                                "height": {
                                                    "type": "decimal",
                                                    "description": "altura",
                                                    "required": false
                                                },
                                                "width": {
                                                    "type": "decimal",
                                                    "description": "largura",
                                                    "required": false
                                                },
                                                "length": {
                                                    "type": "decimal",
                                                    "description": "comprimento",
                                                    "required": false
                                                },
                                                "maxSumDimension": {
                                                    "type": "decimal",
                                                    "description": "",
                                                    "required": false
                                                }
                                            }
                                        },
                                        "kitItem": {
                                            "type": "array",
                                            "description": "Coleção de outros itens que compõem este item. Ocorre nos casos em que o item é um kit",
                                            "required": false
                                        }
                                    }
                                },
                                "slaType": {
                                    "type": "string",
                                    "description": "Tipo da entrega",
                                    "required": false
                                },
                                "slaTypeName": {
                                    "type": "string",
                                    "description": "Tipo da entrega",
                                    "required": false
                                },
                                "freightTableName": {
                                    "type": "string",
                                    "description": "Nome da Transportadora que entregará",
                                    "required": false
                                },
                                "freightTableId": {
                                    "type": "string",
                                    "description": "Identificador da transportadora que entregará",
                                    "required": false
                                },
                                "listPrice": {
                                    "type": "decimal",
                                    "description": "Preço da entrega",
                                    "required": false
                                },
                                "promotionalPrice": {
                                    "type": "decimal",
                                    "description": "Preço promocional da entrega",
                                    "required": false
                                },
                                "transitTime": {
                                    "type": "TimeSpan",
                                    "description": "Tempo de transito do estoque para a doca",
                                    "required": false
                                },
                                "dockTime": {
                                    "type": "TimeSpan",
                                    "description": "Tempo de manuseio na doca",
                                    "required": false
                                },
                                "timeToDockPlusDockTime": {
                                    "type": "TimeSpan",
                                    "description": "Tempo de manuseio da doca mais o tempo do estoque para a doca",
                                    "required": false
                                },
                                "totalTime": {
                                    "type": "TimeSpan",
                                    "description": "Tempo total da entrega",
                                    "required": false
                                },
                                "deliveryWindows": {
                                    "type": "object",
                                    "description": "Janela de entrega agendada",
                                    "required": false,
                                    "arguments": {
                                        "startDateUtc": {
                                            "type": "DateTimeOffset",
                                            "description": "",
                                            "required": false
                                        },
                                        "endDateUtc": {
                                            "type": "DateTimeOffset",
                                            "description": "",
                                            "required": false
                                        },
                                        "listPrice": {
                                            "type": "decimal",
                                            "description": "",
                                            "required": false
                                        }
                                    }
                                },
                                "wareHouseId": {
                                    "type": "string",
                                    "description": "Estoque que deverá reservar o item. Se não for informado, o sistema decide de qual estoque retirar",
                                    "required": false
                                },
                                "dockId": {
                                    "type": "string",
                                    "description": "Doca utilizada na composicão da rota de entrega. Se não for informado, o sistema decide a melhor rota",
                                    "required": false
                                },
                                "location": {
                                    "type": "object",
                                    "description": "Endereço da entrega",
                                    "required": false,
                                    "arguments": {
                                        "zipCode": {
                                            "type": "string",
                                            "description": "CEP da entrega",
                                            "required": false
                                        },
                                        "country": {
                                            "type": "string",
                                            "description": "País da entrega",
                                            "required": true
                                        },
                                        "deliveryPointId": {
                                            "type": "string",
                                            "description": "Ponto de entrega.Utilizado nos casos em que a entrega será realizada em um local pré-cadastrado, como uma loja física",
                                            "required": false
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "example": {
                "request": [
                    {
                        "salesChannel": "1",
                        "lockId": null,
                        "autorizationExpirationTTL": "00:10:00",
                        "deliveryItemOptions": [
                            {
                                "item": {
                                    "id": "61922",
                                    "groupItemId": null,
                                    "kitItem": [
                                        
                                    ],
                                    "quantity": 1,
                                    "price": 17.9,
                                    "additionalHandlingTime": "00:00:00",
                                    "dimension": {
                                        "weight": 45.0,
                                        "height": 19.0,
                                        "width": 13.0,
                                        "length": 5.5,
                                        "cubicweight": 0.28
                                    }
                                },
                                "slaType": "Normal",
                                "slaTypeName": "Normal",
                                "listPrice": 2.67,
                                "promotionalPrice": 2.67,
                                "transitTime": "00:00:00",
                                "dockTime": "00:00:00",
                                "timeToDockPlusDockTime": "00:00:00",
                                "totalTime": "00:00:00",
                                "deliveryWindows": null,
                                "wareHouseId": "1_1",
                                "dockId": "1_1_1",
                                "location": {
                                    "zipCode": "20940060",
                                    "country": "BRA"
                                }
                            },
                            {
                                "item": {
                                    "id": "61922",
                                    "groupItemId": null,
                                    "kitItem": [
                                        
                                    ],
                                    "quantity": 1,
                                    "price": 17.9,
                                    "additionalHandlingTime": "00:00:00",
                                    "dimension": {
                                        "weight": 45.0,
                                        "height": 19.0,
                                        "width": 13.0,
                                        "length": 5.5,
                                        "cubicweight": 0.28
                                    }
                                },
                                "slaType": "Normal",
                                "slaTypeName": "Normal",
                                "listPrice": 2.67,
                                "promotionalPrice": 2.67,
                                "transitTime": "00:00:00",
                                "dockTime": "00:00:00",
                                "timeToDockPlusDockTime": "00:00:00",
                                "totalTime": "00:00:00",
                                "deliveryWindows": null,
                                "wareHouseId": "1_1",
                                "dockId": "1_1_1",
                                "location": {
                                    "zipCode": "20940060",
                                    "country": "BRA"
                                }
                            },
                            {
                                "item": {
                                    "id": "61922",
                                    "groupItemId": null,
                                    "kitItem": [
                                        
                                    ],
                                    "quantity": 1,
                                    "price": 17.9,
                                    "additionalHandlingTime": "00:00:00",
                                    "dimension": {
                                        "weight": 45.0,
                                        "height": 19.0,
                                        "width": 13.0,
                                        "length": 5.5,
                                        "cubicweight": 0.28
                                    }
                                },
                                "slaType": "Normal",
                                "slaTypeName": "Normal",
                                "listPrice": 4.67,
                                "promotionalPrice": 2.67,
                                "transitTime": "00:00:00",
                                "dockTime": "00:00:00",
                                "timeToDockPlusDockTime": "00:00:00",
                                "totalTime": "00:00:00",
                                "deliveryWindows": null,
                                "wareHouseId": "1_1",
                                "dockId": "1_1_1",
                                "location": {
                                    "zipCode": "20940060",
                                    "country": "BRA"
                                }
                            }
                        ]
                    }
                ],
                "response": [
                    {
                        "LastUpdateDateUtc": "2014-03-27T15:37:11.3598522-03:00",
                        "SalesChannel": "1",
                        "LockId": "612dadb7-dd12-4f99-8d44-57deb73d1bb1",
                        "ReservationDateUtc": "2014-03-27T15:37:10.2834712-03:00",
                        "MaximumConfirmationDateUtc": "2014-03-27T15:37:10.2834712-03:00",
                        "Status": 1,
                        "SlaRequest": [
                            {
                                "item": {
                                    "id": "61922",
                                    "groupItemId": null,
                                    "quantity": 1,
                                    "price": 17.9,
                                    "modal": "UNDEFINED",
                                    "additionalHandlingTime": "00:00:00",
                                    "dimension": {
                                        "weight": 45,
                                        "height": 19,
                                        "width": 13,
                                        "length": 5.5,
                                        "maxSumDimension": 0
                                    },
                                    "kitItem": [
                                        
                                    ]
                                },
                                "slaType": "Normal",
                                "slaTypeName": "Normal",
                                "freightTableName": null,
                                "freightTableId": null,
                                "listPrice": 2.67,
                                "promotionalPrice": 2.67,
                                "transitTime": "00:00:00",
                                "dockTime": "00:00:00",
                                "timeToDockPlusDockTime": "00:00:00",
                                "totalTime": "00:00:00",
                                "deliveryWindows": null,
                                "wareHouseId": "1_1",
                                "dockId": "1_1_1",
                                "location": {
                                    "zipCode": "20940060",
                                    "country": "BRA",
                                    "deliveryPointId": null
                                }
                            },
                            {
                                "item": {
                                    "id": "61922",
                                    "groupItemId": null,
                                    "quantity": 1,
                                    "price": 17.9,
                                    "modal": "UNDEFINED",
                                    "additionalHandlingTime": "00:00:00",
                                    "dimension": {
                                        "weight": 45,
                                        "height": 19,
                                        "width": 13,
                                        "length": 5.5,
                                        "maxSumDimension": 0
                                    },
                                    "kitItem": [
                                        
                                    ]
                                },
                                "slaType": "Normal",
                                "slaTypeName": "Normal",
                                "freightTableName": null,
                                "freightTableId": null,
                                "listPrice": 2.67,
                                "promotionalPrice": 2.67,
                                "transitTime": "00:00:00",
                                "dockTime": "00:00:00",
                                "timeToDockPlusDockTime": "00:00:00",
                                "totalTime": "00:00:00",
                                "deliveryWindows": null,
                                "wareHouseId": "1_1",
                                "dockId": "1_1_1",
                                "location": {
                                    "zipCode": "20940060",
                                    "country": "BRA",
                                    "deliveryPointId": null
                                }
                            },
                            {
                                "item": {
                                    "id": "61922",
                                    "groupItemId": null,
                                    "quantity": 1,
                                    "price": 17.9,
                                    "modal": "UNDEFINED",
                                    "additionalHandlingTime": "00:00:00",
                                    "dimension": {
                                        "weight": 45,
                                        "height": 19,
                                        "width": 13,
                                        "length": 5.5,
                                        "maxSumDimension": 0
                                    },
                                    "kitItem": [
                                        
                                    ]
                                },
                                "slaType": "Normal",
                                "slaTypeName": "Normal",
                                "freightTableName": null,
                                "freightTableId": null,
                                "listPrice": 4.67,
                                "promotionalPrice": 2.67,
                                "transitTime": "00:00:00",
                                "dockTime": "00:00:00",
                                "timeToDockPlusDockTime": "00:00:00",
                                "totalTime": "00:00:00",
                                "deliveryWindows": null,
                                "wareHouseId": "1_1",
                                "dockId": "1_1_1",
                                "location": {
                                    "zipCode": "20940060",
                                    "country": "BRA",
                                    "deliveryPointId": null
                                }
                            }
                        ],
                        "CanceledDateUtc": "0001-01-01T00:00:00-02:00",
                        "AuthorizedDateUtc": "2014-03-27T15:37:11.3598522-03:00",
                        "ConfirmedDateUtc": "0001-01-01T00:00:00-02:00",
                        "Errors": [
                            
                        ],
                        "IsSucess": true
                    }
                ]
            }
        },
        {
            "title": "Consulta uma reserva",
            "description": "Consulta uma reserva com base em seu identificador único",
            "verb": "GET",
            "route": {
                "template": "/api/logistics/pvt/inventory/reservations/{lockId}",
                "parameter": {
                    "lockId": {
                        "type": "string",
                        "description": "Identificador único da reserva",
                        "required": true
                    }
                }
            },
            "example": {
                "response": [
                    
                ],
                "request": [
                    {
                        "LastUpdateDateUtc": "2014-02-21T17:28:06.197-03:00",
                        "SalesChannel": "2",
                        "LockId": "30933125",
                        "ReservationDateUtc": "2013-09-06T18:54:51.176-03:00",
                        "MaximumConfirmationDateUtc": "2013-09-14T18:54:51.316-03:00",
                        "Status": 5,
                        "SlaRequest": [
                            {
                                "item": {
                                    "id": "8992",
                                    "groupItemId": null,
                                    "quantity": 1,
                                    "price": 0,
                                    "modal": null,
                                    "additionalHandlingTime": "00:00:00",
                                    "dimension": {
                                        "weight": 414,
                                        "height": 2,
                                        "width": 25,
                                        "length": 35,
                                        "maxSumDimension": 0
                                    },
                                    "kitItem": [
                                        
                                    ]
                                },
                                "slaType": "Econômica",
                                "slaTypeName": null,
                                "freightTableName": "PAC",
                                "freightTableId": "82",
                                "listPrice": 8.4,
                                "promotionalPrice": 8.4,
                                "transitTime": "5.00:00:00",
                                "dockTime": "00:00:00",
                                "timeToDockPlusDockTime": "00:00:00",
                                "totalTime": "5.00:00:00",
                                "deliveryWindows": {
                                    "startDateUtc": "0001-01-01T00:00:00-02:00",
                                    "endDateUtc": "0001-01-01T00:00:00-02:00",
                                    "listPrice": 0
                                },
                                "wareHouseId": "1_1",
                                "dockId": "4CA4C58D-8285-4D57-B616-48CA563BF641",
                                "location": {
                                    "zipCode": "01030010",
                                    "country": "BRA",
                                    "deliveryPointId": null
                                }
                            }
                        ],
                        "CanceledDateUtc": "2014-02-21T17:28:06.197-03:00",
                        "AuthorizedDateUtc": "2013-09-06T18:54:51.316-03:00",
                        "ConfirmedDateUtc": "2013-09-06T18:54:52.299-03:00",
                        "Errors": [
                            
                        ],
                        "IsSucess": true
                    }
                ]
            }
        },
        {
            "title": "Consulta as reservas por sku e estoque",
            "description": "Obtém reservas por sku e estoque",
            "verb": "GET",
            "route": {
                "template": "/api/logistics/pvt/inventory/reservations/{wareHouseId}/{itemId}",
                "parameters": {
                    "wareHouseId": {
                        "type": "string",
                        "description": "Identificador único da reserva",
                        "required": true
                    },
                    "itemId": {
                        "type": "string",
                        "description": "Identificador único do item",
                        "required": true
                    }
                }
            },
            "example": {
                "response": [
                    {
                        "items": [
                            {
                                "LockId": "0a4fbbb6-f915-4adf-b062-029af2272940",
                                "ItemId": "61922",
                                "Quantity": 3,
                                "SalesChannel": "1",
                                "ReservationDateUtc": "2014-03-27T15:45:47.585-03:00",
                                "MaximumConfirmationDateUtc": "2014-03-27T15:55:48.271-03:00",
                                "ConfirmedDateUtc": "0001-01-01T00:00:00-02:00",
                                "Status": "Authorized",
                                "DateUtcAcknowledgedOnBalanceSystem": "0001-01-01T00:00:00"
                            },
                            {
                                "LockId": "612dadb7-dd12-4f99-8d44-57deb73d1bb1",
                                "ItemId": "61922",
                                "Quantity": 3,
                                "SalesChannel": "1",
                                "ReservationDateUtc": "2014-03-27T15:37:10.283-03:00",
                                "MaximumConfirmationDateUtc": "2014-03-27T15:47:11.391-03:00",
                                "ConfirmedDateUtc": "0001-01-01T00:00:00-02:00",
                                "Status": "Authorized",
                                "DateUtcAcknowledgedOnBalanceSystem": "0001-01-01T00:00:00"
                            },
                            {
                                "LockId": "00-363080672005-01",
                                "ItemId": "61922",
                                "Quantity": 1,
                                "SalesChannel": "1",
                                "ReservationDateUtc": "2013-09-20T17:11:18.266-03:00",
                                "MaximumConfirmationDateUtc": "2013-09-27T17:11:18.438-03:00",
                                "ConfirmedDateUtc": "2013-09-20T18:12:49.05-03:00",
                                "Status": "Confirmed",
                                "DateUtcAcknowledgedOnBalanceSystem": "0001-01-01T00:00:00"
                            },
                            {
                                "LockId": "00-344111167898-01",
                                "ItemId": "61922",
                                "Quantity": 1,
                                "SalesChannel": "1",
                                "ReservationDateUtc": "2013-07-03T16:19:00.4-03:00",
                                "MaximumConfirmationDateUtc": "2013-07-10T16:19:00.556-03:00",
                                "ConfirmedDateUtc": "2013-07-03T16:19:21.632-03:00",
                                "Status": "Confirmed",
                                "DateUtcAcknowledgedOnBalanceSystem": "0001-01-01T00:00:00"
                            },
                            {
                                "LockId": "00-344141065988-01",
                                "ItemId": "61922",
                                "Quantity": 1,
                                "SalesChannel": "1",
                                "ReservationDateUtc": "2013-07-03T19:17:58.877-03:00",
                                "MaximumConfirmationDateUtc": "2013-07-10T19:17:59.033-03:00",
                                "ConfirmedDateUtc": "2013-07-03T19:17:42.84-03:00",
                                "Status": "Confirmed",
                                "DateUtcAcknowledgedOnBalanceSystem": "0001-01-01T00:00:00"
                            },
                            {
                                "LockId": "00-344150073503-01",
                                "ItemId": "61922",
                                "Quantity": 1,
                                "SalesChannel": "1",
                                "ReservationDateUtc": "2013-07-03T20:01:21.537-03:00",
                                "MaximumConfirmationDateUtc": "2013-07-10T20:01:21.709-03:00",
                                "ConfirmedDateUtc": "2013-07-03T20:02:16.481-03:00",
                                "Status": "Confirmed",
                                "DateUtcAcknowledgedOnBalanceSystem": "0001-01-01T00:00:00"
                            },
                            {
                                "LockId": "00-344082267353-01",
                                "ItemId": "61922",
                                "Quantity": 1,
                                "SalesChannel": "1",
                                "ReservationDateUtc": "2013-07-03T12:37:19.588-03:00",
                                "MaximumConfirmationDateUtc": "2013-07-10T12:37:19.729-03:00",
                                "ConfirmedDateUtc": "2013-07-03T12:37:36.904-03:00",
                                "Status": "Confirmed",
                                "DateUtcAcknowledgedOnBalanceSystem": "0001-01-01T00:00:00"
                            },
                            {
                                "LockId": "00-344153166958-01",
                                "ItemId": "61922",
                                "Quantity": 1,
                                "SalesChannel": "1",
                                "ReservationDateUtc": "2013-07-03T19:52:52.309-03:00",
                                "MaximumConfirmationDateUtc": "2013-07-10T19:52:52.481-03:00",
                                "ConfirmedDateUtc": "2013-07-03T19:53:18.636-03:00",
                                "Status": "Confirmed",
                                "DateUtcAcknowledgedOnBalanceSystem": "0001-01-01T00:00:00"
                            }
                        ],
                        "paging": {
                            "page": 1,
                            "perPage": 15,
                            "total": 8,
                            "pages": 1
                        }
                    }
                ],
                "request": [
                    
                ]
            }
        },
        {
            "title": "Confirma uma reserva",
            "description": "Confirma uma reserva. Só é possível confirmar reservas que estejam com status \"Authorized\"",
            "verb": "POST",
            "route": {
                "template": "/api/logistics/pvt/inventory/reservations/{lockId}/confirm",
                "parameters": {
                    "lockId": {
                        "type": "string",
                        "description": "Identificador único da reserva",
                        "required": true
                    }
                }
            },
            "example": {
                "request": [
                    
                ],
                "response": [
                    true
                ]
            }
        },
        {
            "title": "Cancela uma reserva",
            "description": "Cancela uma reserva com base em seu identificador. O cancelamento de uma reserva não poderá ser desfeito",
            "verb": "POST",
            "route": {
                "template": "/api/logistics/pvt/inventory/reservations/{lockId}/cancel",
                "parameters": {
                    "lockId": {
                        "type": "string",
                        "description": "Identificador único da reserva",
                        "required": true
                    }
                }
            },
            "example": {
                "request": [
                    
                ],
                "response": [
                    true
                ]
            }
        },
        {
            "title": "Realiza o Acknowledge de uma reserva",
            "description": "Avisa ao logistics que o ERP já tem conhecimento da reserva e irá prosseguir com a entregar o item",
            "verb": "POST",
            "route": {
                "template": "/api/logistics/pvt/inventory/reservations/{lockId}/cancel",
                "parameters": {
                    "lockId": {
                        "type": "string",
                        "description": "Identificador único da reserva",
                        "required": true
                    }
                    
                }
            },
            "example": {
                "request": [
                    
                ],
                "response": [
                    false
                ]
            }
        }
    ]
}